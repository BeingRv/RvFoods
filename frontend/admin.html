<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Rv Foods - Kitchen Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body style="padding:20px">
  <div class="container">
    <h2>Kitchen Dashboard (Rv Foods)</h2>
    <div id="orders"></div>
  </div>
<script>
async function loadOrders(){
  try{
    const res = await fetch('http://localhost:8080/api/admin/orders');
    const data = await res.json();
    const container = document.getElementById('orders');
    container.innerHTML = '';
    data.forEach(o=>{
      const div = document.createElement('div');
      div.className='card mb-2';
      const b = document.createElement('div');
      b.className='card-body';
      b.innerHTML = '<h5>Order #'+o.id+' - '+o.status+'</h5><p>Table: '+o.tableId+'</p>';
      const btn = document.createElement('button');
      btn.className='btn btn-sm btn-primary';
      btn.textContent='Mark Preparing';
      btn.onclick = async ()=> {
        await fetch('http://localhost:8080/api/admin/order/'+o.id+'?status=PREPARING',{method:'PUT'});
        loadOrders();
      };
      b.appendChild(btn);
      div.appendChild(b);
      container.appendChild(div);
    });
  }catch(err){ console.error(err); document.getElementById('orders').innerText='Failed to load orders' }
}
setInterval(loadOrders, 3000);
loadOrders();
</script>
</body>
</html>
